# Дослідження фільтра Калмана

Мета роботи

1. Ознайомитися з роботою фільтра Калмана та принципами його застосування.
2. Вивчити вплив різних параметрів фільтра на результати згладжування сигналу.
3. Навчитися аналізувати результати фільтрації, враховуючи значення дисперсії шуму до та після фільтрації.

<h1>Дослідження впливу параметрів</h1>

1.Матриця коваріації шуму процесу (Q). При збільшенні фільтр Кальмана більше довіряє вимірюванням і менше передбаченням моделі.

Початкові значення: F = 1 H = 1 Q = 1 R = 10 P = 1 x = 0

Q = 1:
![Q1](scr/Q1.jpg)

Q = 10:
![Q10](scr/Q10.jpg)

Q = 100:
![Q100](scr/Q100.jpg)

2. Матриця коваріації шуму вимірювання (R)

Початкові значення: F = 1 H = 1 Q = 1 R = 1 P = 1 x = 0

У разі збільшення значення матриці коваріації шуму вимірювання знижується довіра до вимірювання, і навпаки, зменшення цього значення робить фільтр Калмана більш чутливим до нових вимірювань. 

R = 1:
![R1](scr/R1.jpg)

R = 10:
![R10](scr/R10.jpg)

R = 100:
![R100](scr/R100.jpg)

3. Початкова матриця коваріації (P)

Початкові значення: F = 1 H = 1 Q = 1 R = 10 P = 0.1 x = 0

Збільшення призводить до того, що фільтр на початку стає менш впевненим у своєму стані. При зменшенні фільтр більш впевнений у початкових оцінках, тому на початку реакції на зміни будуть повільнішими. 

P = 0.1:
![P0.1](scr/P0.1.jpg)

P = 1:
![P1](scr/P1.jpg)

P = 10:
![P10](scr/P10.jpg)

4. Початкова оцінка стану (Initial state estimate)

Початкові значення: F = 1 H = 1 Q = 1 R = 10 P = 1 x = 0

Якщо початкова оцінка не відповідає реальному початковому стану, фільтру знадобиться більше часу на коригування. Якщо початкова оцінка близька до реального значення, фільтр швидко стабілізується і буде давати точніші результати від самого початку.

x = 0:
![x0](scr/x0.jpg)

x = 10:
![x10](scr/x10.jpg)

x = 50:
![x50](scr/x50.jpg)

5. Постійна складова сигналу (offset)

При збільшенні зсуву фільтр зможе адаптуватися до нових середніх значень сигналу, але це може зайняти більше часу. Зменшення зсуву дозволить швидше відстежувати зміни.

offset = 0
![offset0](scr/offset0.jpg)

offset = 10
![offset10](scr/offset10.jpg)

offset = 50
![offset50](scr/offset50.jpg)

6. Загальний час моделювання (total_time)

При збільшенні часу, фільтр має більше часу для стабілізації. Зменшення часу може призвести до того, що фільтр не встигне повністю "налаштуватися", і його оцінки залишаться неточними або нерівномірними.

total_time = 1
![tt1](scr/tt1.jpg)

total_time = 5
![tt5](scr/tt5.jpg)

total_time = 0.3
![tt0.3](scr/tt0.3.jpg)


<h1>Порівняння результатів</h1>

1. Q = 1; R = 10; P = 1; x = 0; offset = 10; total_time = 1;

![01](scr/01.jpg)

Помірне значення Q дозволяє фільтру збалансовано реагувати на зміни, пристосовуючись до сигналу. Високе значення R свідчить про довіру до вимірювань, через що фільтр активно коригує свої оцінки, навіть якщо вимірювання зазнають шуму. Спочатку дисперсія шуму є значною, але після фільтрації вона знижується завдяки корекції фільтром.

2. Q = 0.1; R = 1; P = 0.1; x = 5; offset = 15; total_time = 0.5;

![02](scr/02.jpg)

Низьке значення Q робить фільтр більш впевненим у своїх прогнозах, через що він повільніше реагує на зміни в сигналі Низьке значення R означає високу довіру фільтра до даних вимірювань, тому коригування прогнозів стають незначними. Після фільтрації дисперсія може залишитися досить низькою, адже фільтр мінімально коригує результати, лише враховуючи шум.

3. Q = 5; R = 50; P = 10; x = 0; offset = 0; total_time = 5;

![03](scr/03.jpg)

Високе значення Q знижує впевненість фільтра в прогнозах, роблячи його більш чутливим до змін у вимірюваннях. Висока дисперсія в R змушує фільтр менше довіряти вимірюванням, що може спричинити збільшення шуму в оцінках. Дисперсія перед фільтрацією буде високою, і хоча фільтр зменшить її, вона залишиться підвищеною через чутливість до шуму.

4. Q = 1; R = 1; P = 5; x = 10; offset = 5; total_time = 2;

![04](scr/04.jpg)

Помірне значення Q дає змогу фільтру адаптуватися до шуму, не вдаючись до занадто різких коригувань. Низьке значення R дозволяє фільтру більше покладатися на вимірювання, що сприяє активнішій корекції. Після фільтрації дисперсія знижується, оскільки фільтр ефективно коригує дані.

5. Q = 2; R = 20; P = 0.5; x = 0; offset = 12; total_time = 3;

![05](scr/05.jpg)

Значення Q, рівне 2, дозволяє фільтру зберігати помірну чутливість до шуму, але без надмірної агресивності. Високе значення R зменшує чутливість фільтра до вимірювань, через що він не може повністю на них покладатися. До фільтрації дисперсія буде великою, але після фільтрації вона значно знизиться завдяки адаптації фільтра до зсуву сигналу.




